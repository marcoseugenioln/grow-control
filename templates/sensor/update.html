<div class="item-edit-btn-container">
    <button onclick='showSensorChartModal({{ sensor_id }}, "{{ name }}", {{ sensor_data[grow_id][sensor_id] | tojson }})' class="btn btn-sm btn-info">
        CHART
    </button>
    <button class="btn" onclick="togglePopupMenu('sensor-edit-container-{{ sensor_id }}')">
        EDIT
    </button>
    <button class="btn" onclick="togglePopupMenu('sensor-delete-container-{{ sensor_id }}')">
        DELETE
    </button>
</div>

<!-- Modal para confirmar exclusão -->
<div class="overlay" id="sensor-delete-container-{{ sensor_id }}">
    <div class="centralized-div">
        <p>Are you sure you want to delete sensor {{ name }}?</p>
        <table>
            <tr>
                <td>
                    <form method="get" action="{{ url_for('delete_sensor', grow_id=id, sensor_id=sensor_id) }}">
                        <button class="btn">
                            <img src="{{ url_for('static', filename='image/confirm-icon.png')}}" class="btn-img" id="create-btn">
                        </button>
                    </form>
                </td>
                <td>
                    <button class="btn" id="cancel-btn" onclick="togglePopupMenu('sensor-delete-container-{{ sensor_id }}')">
                        <img src="{{ url_for('static', filename='image/cancel-icon.png')}}" class="btn-img" id="cancel-btn">
                    </button>
                </td>
            </tr>
        </table>
    </div>
</div>

<!-- Modal para edição -->
<div class="overlay" id="sensor-edit-container-{{ sensor_id }}">
    <div class="centralized-div">
        <form action="{{ url_for('update_sensor', grow_id = grow_id, sensor_id = sensor_id) }}" method="post">
            <fieldset>
                <legend>Name</legend>
                <input type="text" class="text-field" name="name" value="{{ name }}">
            </fieldset>

            <fieldset>
                <legend>Sensor Type</legend>
                <select id="sensor-type-id-{{ sensor_id }}" class="combo-box" name="sensor_type_id">
                    {% for stid, stname, stdescription in sensor_types %}
                        {% if stid == sensor_type_id %}
                            <option value="{{ stid }}" selected>{{ stname }}</option>
                        {% else %}
                            <option value="{{ stid }}">{{ stname }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </fieldset>

            <fieldset>
                <legend>Device IP</legend>
                <input type="text" class="text-field" name="ip" value="{{ ip }}">
            </fieldset>

            <fieldset>
                <legend>Data Retention Days</legend>
                <input type="number" class="text-field" name="data_retention_days" step="1" min="0" max="30" value="{{ data_retention_days }}">
            </fieldset>

            <div class="btn-container">
                <button class="btn" type="submit">
                <img src="{{ url_for('static', filename='image/confirm-icon.png')}}" class="btn-img" id="create-btn">
                </button>
                <button type="button" class="btn" onclick="togglePopupMenu('sensor-edit-container-{{ sensor_id }}')">
                    <img src="{{ url_for('static', filename='image/cancel-icon.png')}}" class="btn-img" id="cancel-btn">
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Modal para o gráfico - ADICIONEI ESTE NOVO MODAL -->
<div class="overlay" id="sensor-chart-container-{{ sensor_id }}">
    <div class="centralized-div" style="width: 80%; max-width: 900px;">
        <h2>Gráfico do Sensor: {{ name }}</h2>
        <div id="chart-container-{{ sensor_id }}" style="height: 400px; width: 100%;">
            <!-- O gráfico será renderizado aqui -->
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button class="btn" onclick="togglePopupMenu('sensor-chart-container-{{ sensor_id }}')">
                Fechar
            </button>
        </div>
    </div>
</div>